# apko.yaml para build da imagem final
# Seguindo a documentação oficial do Apko

archs:
  - x86_64

contents:
  repositories:
    - https://dl-cdn.alpinelinux.org/alpine/edge/main
    - https://dl-cdn.alpinelinux.org/alpine/edge/community
    - ./packages
  packages:
    - python3
    - busybox # Fornece sh e utilitários básicos
    - app-melange

paths:
  - path: /app
    type: directory
    uid: 65532
    gid: 65532
    permissions: 0755

entrypoint:
  command: "sh -c 'PYTHONPATH=/app/lib/python3.12/site-packages python3 /app/app.py'"

accounts:
  run-as: "65532"
